@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<style>
    .pc-auth {
        gap: .5rem;
        align-items: center;
    }

    .pc-chip {
        display: inline-flex;
        align-items: center;
        gap: .5rem;
        padding: .35rem .6rem;
        border-radius: 999px;
        background: rgba(79, 70, 229, .08);
        border: 1px solid rgba(79, 70, 229, .14);
        color: rgba(15, 23, 42, .9);
        font-weight: 700;
        max-width: 320px;
    }

    .pc-avatar {
        width: 28px;
        height: 28px;
        border-radius: 999px;
        display: inline-grid;
        place-items: center;
        background: linear-gradient(135deg, rgba(79,70,229,.95), rgba(34,197,94,.9));
        color: #fff;
        font-size: .85rem;
        font-weight: 800;
        flex: 0 0 auto;
    }

    .pc-username {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 240px;
        font-size: .9rem;
    }

    .pc-btn {
        border-radius: 999px !important;
        font-weight: 700 !important;
        padding: .45rem .85rem !important;
        line-height: 1.1;
    }

    .pc-btn-primary {
        background: #4f46e5 !important;
        border-color: #4f46e5 !important;
    }

        .pc-btn-primary:hover {
            background: #4338ca !important;
            border-color: #4338ca !important;
        }

    .pc-btn-outline {
        border-color: rgba(79, 70, 229, .35) !important;
        color: #4f46e5 !important;
        background: rgba(255,255,255,.6) !important;
    }

        .pc-btn-outline:hover {
            background: rgba(79, 70, 229, .08) !important;
        }

    .pc-btn-danger {
        border-radius: 999px !important;
        font-weight: 800 !important;
        padding: .45rem .85rem !important;
        background: rgba(220, 53, 69, .06) !important;
        border-color: rgba(220, 53, 69, .25) !important;
        color: #dc3545 !important;
    }

        .pc-btn-danger:hover {
            background: rgba(220, 53, 69, .10) !important;
        }
</style>

<ul class="navbar-nav ms-auto pc-auth">

    @if (SignInManager.IsSignedIn(User))
    {
        <li class="nav-item me-2">
            <span class="pc-chip">
                <span class="pc-avatar">
                    @(string.IsNullOrWhiteSpace(User.Identity?.Name) ? "U" : User.Identity!.Name!.Trim()[0].ToString().ToUpper())
                </span>
                <span class="pc-username">
                    Hello, @User.Identity.Name!
                </span>
            </span>
        </li>

        <li class="nav-item">
            <form class="d-inline" asp-area="Identity" asp-page="/Account/Logout"
                  asp-route-returnUrl="@Url.Action("Index", "Home")">
                <button type="submit" class="btn pc-btn-danger pc-focus">
                    <i class="bi bi-box-arrow-right me-1"></i>
                    Logout
                </button>
            </form>
        </li>
    }
    else
    {
        <li class="nav-item me-2">
            <a class="btn pc-btn pc-btn-outline pc-focus"
               asp-area="Identity" asp-page="/Account/Login">
                <i class="bi bi-person me-1"></i>
                Login
            </a>
        </li>

        <li class="nav-item">
            <a class="btn pc-btn pc-btn-primary text-white pc-focus"
               asp-area="Identity" asp-page="/Account/Register">
                <i class="bi bi-stars me-1"></i>
                Register
            </a>
        </li>
    }

</ul>
